# 2022.10.31 物理系统总结和实战
## 鼠标射线检测

1、首先获取鼠标在屏幕上点击的位置发出的射线，用方法Camera.ScreenPointToRay(Input.mousePosition)

2、声明射线检测的结果RaycastHit

3、使用物体射线的检测结果Physics.Raycast()
```
Ray mouseRay = Camera.main.ScreenPointToRay(Input.mousePosition);
RaycastHit hitInfo;
if (Input.GetMouseButtonDown(0) && Physics.Raycast(mouseRay, out hitInfo, 50))
{
    Debug.Log("Click " + hitInfo.collider.gameObject.name);
    // 绘制点击点
    Debug.DrawRay(hitInfo.point, hitInfo.normal * 5, Color.green, 20, false);
}
```
## 质心
```
void Start () {
    rigid = GetComponent<Rigidbody>();
    // 设置centerOfMass，指定重心
    rigid.centerOfMass = new Vector3(0, -1, 0);
}
```
## 施加力的方式
```
// 让小球旋转
if (Input.GetKeyDown(KeyCode.R))
{
     rigid.angularVelocity = new Vector3(0, 60, 0);
}
// 施加的力高于重心
if (Input.GetKeyDown(KeyCode.H))
{
    rigid.AddForceAtPosition(new Vector3(0, 0, -10), new Vector3(0.5f, 1.5f, 0.5f));
}
// 施加的力等于重心
if (Input.GetKeyDown(KeyCode.E))
{
    rigid.AddForceAtPosition(new Vector3(-10, 0, 0), new Vector3(0.5f, 1f, 0.5f));
}
// 施加的力低于重心
if (Input.GetKeyDown(KeyCode.L))
{
    rigid.AddForceAtPosition(new Vector3(0, 0, -10), new Vector3(0.5f, 0.5f, 0.5f));
}
```
## 刚体约束
```
//  冻结所有的缩放和旋转
rigid.constraints = RigidbodyConstraints.FreezeAll;
//  仅冻结沿x轴的位移，取消所有其他约束
rigid.constraints = RigidbodyConstraints.FreezePositionX;
//  仅冻结所有旋转，取消位移约束
rigid.constraints = RigidbodyConstraints.FreezeRotation;
//  冻结沿x轴和z轴的旋转，冻结沿y轴的位移
rigid.constraints  = RigidbodyConstraints.FreezeRotationX 
RigidbodyConstraints.FreezeRotationZ 
RigidbodyConstraints.FreezePositionY;
```